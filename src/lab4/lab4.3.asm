	ORG 00H
	AJMP INIT
	ORG 50H

SEG_DATA:
	DB 03H
	DB 09FH
	DB 025H
	DB 0DH
	DB 099H
	DB 049H
	DB 041H
	DB 01FH
	DB 01H
	DB 09H

INIT:
	MOV TMOD, #01H 
	MOV DPTR,  #SEG_DATA
	MOV R4, #01110111B
	MOV R0, #00H
	MOV R1, #04H
	MOV R2, #09H
	MOV R3, #05H


LOOP:
	MOV R5, #0F0H
	ACALL INCREASE
	ACALL DISPLAYFUNC
	JMP LOOP

DISPLAYFUNC:
	MOV  P0, R4
	MOV  R6, #010H
	MOV  R7, #010H
	ACALL DELAY
	MOV  A, R4
	RR   A
	MOV  R4, A

DISPLAY4:
	CJNE R4, #01110111B, DISPLAY3
	MOV A, R3

DISPLAY3:
	CJNE R4, #10111011B, DISPLAY2
	MOV A, R2

DISPLAY2:
	CJNE R4, #11011101B, DISPLAY1
	MOV A, R1

DISPLAY1:
	CJNE R4, #11101110B, DISPLAY
	MOV A, R0

DISPLAY:
	MOVC A, @A+DPTR
	MOV P1, A
	DJNZ  R5, DISPLAYFUNC
	RET

INCREASE:
	MOV A, R0
	CLR C 
	SUBB A, #9H
	JZ  CARRY2
	MOV A, R0
	INC A
	MOV R0, A
	RET

CARRY2:
	MOV R0, #00H
	MOV A, R1
	CLR C 
	SUBB A, #05H
	JZ  CARRY3
	MOV A, R1
	INC A
	MOV R1, A
	RET

CARRY3:
	MOV R0, #00H
	MOV R1, #00H
	MOV A, R2
	CLR C 
	SUBB A, #09H
	JZ CARRY4
	MOV A, R2
	INC A
	MOV R2,A
	RET

CARRY4:
	MOV R2, #00H
	MOV A, R3
	CLR C 
	SUBB A, #05H
	JZ CONT
	MOV A, R3
	INC A
	MOV R3,A
	RET

CONT:
	MOV R2, #00H
	MOV R3, #00H
	RET


DELAY:
	MOV TH0, #0EFH
	MOV TL0, #0B9H
	SETB TR0	
	JNB TF0, $
	CLR TR0
	CLR TF0
	RET
	END

