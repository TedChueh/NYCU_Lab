	ORG 00H
	AJMP INIT
	ORG 50H

INIT:
	MOV TMOD, #01H 
	MOV R0, #01H
	MOV R1, #01H
	MOV P2, #0FFH

LOOP:
	ACALL MAIN
	JMP LOOP

MAIN:

DOTMOVERIGHT1:
	JNB P2.4, DOTMOVELEFT1
	CJNE R0, #01H, DOTMOVERIGHT2
	MOV R0, #010H
	JMP DOTMOVELEFT1

DOTMOVERIGHT2:
	MOV A, R0
	RR A
	MOV R0, A

DOTMOVELEFT1:
	JNB P2.5, DOTMOVEDOWN1
	CJNE R0, #010H, DOTMOVELEFT2
	MOV R0, #01H
	JMP DOTMOVEDOWN1

DOTMOVELEFT2:
	MOV A, R0
	RL A
	MOV R0, A

DOTMOVEDOWN1:
	JNB P2.6, DOTMOVEUP1
	CJNE R1, #01H, DOTMOVEDOWN2
	MOV R1, #040H
	JMP DOTMOVEUP1

DOTMOVEDOWN2:
	MOV A, R1
	RR A
	MOV R1, A

DOTMOVEUP1:
	JNB P2.7, EXECUTE
	CJNE R1, #040H, DOTMOVEUP2
	MOV R1, #01H
	JMP EXECUTE

DOTMOVEUP2:
	MOV A, R1
	RL A
	MOV R1, A

EXECUTE:
	MOV P0, R0
	MOV P1, R1
	MOV  R6, #01H
	MOV  R7, #0FAH
	ACALL DELAY
	RET

DELAY:
	MOV TH0, #0FCH
	MOV TL0, #018H
	SETB TR0	

WAIT:
	JNB TF0, $
	CLR TR0
	CLR TF0
	DJNZ R6, DELAY
	MOV R6, #01H
	DJNZ R7, DELAY
	RET
	END