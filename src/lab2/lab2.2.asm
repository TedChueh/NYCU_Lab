	ORG   00H
	AJMP  MAIN
	ORG   50H
MAIN:
	MOV  P0, #0FFH 
	MOV  R0, #7FH
LOOP:
	MOV   A, P0
	CJNE  A, #0FFH, FASTFREQ
	MOV   R1, #0FAH
	ACALL LEDSHIFT
	JMP LOOP
FASTFREQ:
	CJNE A, #00H, CLEAR
    MOV   R1, #03EH
	ACALL LEDSHIFT
	JMP LOOP
CLEAR:
    MOV   P1, #00H
	JMP LOOP
LEDSHIFT:
	MOV   P1, R0
	MOV   A, R0
	RR    A
	MOV   R0, A
	ACALL DELAY
	RET

DELAY:
	MOV A, @R1
	MOV R5, A
DELAY1:
	MOV R6,#0FFH 
DELAY2:
	MOV R7,#05H 
DELAY3:
	DJNZ R7,DELAY3 
	DJNZ R6,DELAY2
	DJNZ R5,DELAY1
	RET

	END