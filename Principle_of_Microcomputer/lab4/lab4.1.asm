	ORG 00H
	AJMP INIT
	ORG 50H

SEG_DATA:
	DB 03H
	DB 09FH
	DB 025H
	DB 0DH
	DB 099H
	DB 049H
	DB 041H
	DB 01FH
	DB 01H
	DB 09H

INIT:
	MOV TMOD, #01H 
	MOV DPTR,  #SEG_DATA
	MOV R4, #01110111B
	MOV R0, #00H
	MOV R1, #00H
	MOV R2, #01H
	MOV R3, #00H


LOOP:
	MOV R5, #05H
	ACALL DISPLAYFUNC
	ACALL DECREASE
	JMP LOOP

DISPLAYFUNC:
	MOV  P0, R4
	MOV  R6, #010H
	MOV  R7, #010H
	ACALL DELAY
	MOV  A, R4
	RR   A
	MOV  R4, A

DISPLAY4:
	CJNE R4, #01110111B, DISPLAY3
	MOV A, R3

DISPLAY3:
	CJNE R4, #10111011B, DISPLAY2
	MOV A, R2

DISPLAY2:
	CJNE R4, #11011101B, DISPLAY1
	MOV A, R1

DISPLAY1:
	CJNE R4, #11101110B, DISPLAY
	MOV A, R0

DISPLAY:
	MOVC A, @A+DPTR
	MOV P1, A
	DJNZ  R5, DISPLAYFUNC
	RET

DECREASE:
	MOV A, R0
	JZ  BORROW2
	DEC A
	MOV R0, A
	RET

BORROW2:
	MOV R0, #09H
	MOV A, R1
	JZ  BORROW3
	DEC A
	MOV R1, A
	RET

BORROW3:
	MOV R1, #09H
	MOV A, R2
	JZ  BORROW4
	DEC A
	MOV R2, A
	RET

BORROW4:
	MOV R2, #09H 
	MOV A, R3
	CJNE  A, #00H , CONT
	MOV R0, #09H
	MOV R1, #09H
	MOV R2, #09H
	MOV R3, #09H
	RET

CONT:
	DEC A
	MOV R3, A
	RET


DELAY:
	MOV TH0, #0FFH
	MOV TL0, #0F0H
	SETB TR0	

WAIT:
	JNB TF0, $
	CLR TR0
	CLR TF0
	DJNZ R6, DELAY
	MOV R6, #010H
	DJNZ R7, DELAY
	RET
	END
